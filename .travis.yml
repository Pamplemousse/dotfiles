---
language: bash
sudo: required
dist: trusty
services: docker

before_install:
  - docker pull pamplemousse/ansible
  - docker pull pamplemousse/latex
  - docker pull pamplemousse/nodejs
  - docker pull pamplemousse/python
  - docker pull pamplemousse/ruby
  - sudo apt-get -qq update
  - sudo apt-get install -y zsh

install:
  - export WORKSPACE=$HOME/Workspace
  - export TOOLS=$HOME/Workspace/tools
  - mkdir $WORKSPACE && mkdir $TOOLS
  - git clone --depth 1 https://github.com/ansible/ansible.git $TOOLS/ansible
  - cd $TOOLS/ansible && git fetch --tags && git checkout v2.5.0 && cd -

env:
  - SSH_AUTH_SOCK: /tmp/ssh-whatever/agent.4242

script:
  - ./tests/bash_unit tests/test_*.sh
